<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>rfidsim: rfid_reader_app.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>rfid_reader_app.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef RFID_READER_APP_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define RFID_READER_APP_H</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;set&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00008"></a>00008 <span class="keyword">using namespace </span>std;
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;boost/shared_ptr.hpp&gt;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#include "application_layer.hpp"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "packet.hpp"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "timer.hpp"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "simulator.hpp"</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="keyword">class </span><a class="code" href="classPhysicalLayer.html">PhysicalLayer</a>;
<a name="l00017"></a>00017 <span class="keyword">typedef</span> boost::shared_ptr&lt;PhysicalLayer&gt; <a class="code" href="classPhysicalLayer.html#1a2fcb7658e5f7c036577e96770058e6">PhysicalLayerPtr</a>;
<a name="l00018"></a>00018 
<a name="l00022"></a><a class="code" href="classReadTagData.html">00022</a> <span class="keyword">class </span><a class="code" href="classReadTagData.html">ReadTagData</a> {
<a name="l00023"></a>00023 <span class="keyword">friend</span> ostream&amp; <a class="code" href="classReadTagData.html#7e440858f5c08073fa8e0e645a18d293">operator&lt;&lt; </a>(ostream&amp; s, <span class="keyword">const</span> <a class="code" href="classReadTagData.html">ReadTagData</a>&amp; readTagData);
<a name="l00024"></a>00024 <span class="keyword">public</span>:
<a name="l00026"></a><a class="code" href="classReadTagData.html#c67964cb156c308dd3ab6e939bcdcbdf">00026</a>    <a class="code" href="classReadTagData.html#c67964cb156c308dd3ab6e939bcdcbdf">ReadTagData</a>(<span class="keyword">const</span> <a class="code" href="classNodeId.html">NodeId</a>&amp; readTagId, <span class="keyword">const</span> <a class="code" href="classSimTime.html">SimTime</a>&amp; timeRead,
<a name="l00027"></a>00027       <span class="keyword">const</span> <a class="code" href="classSimTime.html">SimTime</a>&amp; timeReadSent)
<a name="l00028"></a>00028       : m_readTagId(readTagId), m_timeRead(timeRead), 
<a name="l00029"></a>00029       m_timeReadSent(timeReadSent) {}
<a name="l00030"></a>00030 
<a name="l00035"></a><a class="code" href="classReadTagData.html#421f227fba4cd563546c3454a2baeb95">00035</a>    <a class="code" href="classNodeId.html">NodeId</a> <a class="code" href="classReadTagData.html#421f227fba4cd563546c3454a2baeb95">getReadTagId</a>()<span class="keyword"> const</span>
<a name="l00036"></a>00036 <span class="keyword">   </span>{
<a name="l00037"></a>00037       <span class="keywordflow">return</span> m_readTagId;
<a name="l00038"></a>00038    }
<a name="l00039"></a>00039 
<a name="l00044"></a><a class="code" href="classReadTagData.html#ccec15f76f1bb34c5799cfe2bd47db4f">00044</a>    <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classReadTagData.html#ccec15f76f1bb34c5799cfe2bd47db4f">getTimeRead</a>()<span class="keyword"> const</span>
<a name="l00045"></a>00045 <span class="keyword">   </span>{
<a name="l00046"></a>00046       <span class="keywordflow">return</span> m_timeRead;
<a name="l00047"></a>00047    }
<a name="l00048"></a>00048 
<a name="l00054"></a><a class="code" href="classReadTagData.html#5e114c8da846057b30f50fe469a7afde">00054</a>    <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classReadTagData.html#5e114c8da846057b30f50fe469a7afde">getTimeReadSent</a>()<span class="keyword"> const</span>
<a name="l00055"></a>00055 <span class="keyword">   </span>{
<a name="l00056"></a>00056       <span class="keywordflow">return</span> m_timeReadSent;
<a name="l00057"></a>00057    }
<a name="l00058"></a>00058 
<a name="l00064"></a><a class="code" href="classReadTagData.html#5dc744cf05c73ed5961b5fe9787ca14c">00064</a>    <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classReadTagData.html#5dc744cf05c73ed5961b5fe9787ca14c">getReadLatency</a>()<span class="keyword"> const</span>
<a name="l00065"></a>00065 <span class="keyword">   </span>{
<a name="l00066"></a>00066       <span class="keywordflow">return</span> (m_timeRead - m_timeReadSent);
<a name="l00067"></a>00067    }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="keyword">private</span>:
<a name="l00070"></a>00070    <a class="code" href="classNodeId.html">NodeId</a> m_readTagId;
<a name="l00071"></a>00071    <a class="code" href="classSimTime.html">SimTime</a> m_timeRead;
<a name="l00072"></a>00072    <a class="code" href="classSimTime.html">SimTime</a> m_timeReadSent;
<a name="l00073"></a>00073 };
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="classReadTagData.html#7e440858f5c08073fa8e0e645a18d293">00075</a> <span class="keyword">inline</span> ostream&amp; operator&lt;&lt; (ostream&amp; s, <span class="keyword">const</span> <a class="code" href="classReadTagData.html">ReadTagData</a>&amp; readTagData)
<a name="l00076"></a>00076 {
<a name="l00077"></a>00077    <span class="keywordflow">return</span> s &lt;&lt; <span class="stringliteral">"[ tagId="</span> &lt;&lt; readTagData.<a class="code" href="classReadTagData.html#2b747e5516089ba42c93a6391ce1c8b4">m_readTagId</a> &lt;&lt; 
<a name="l00078"></a>00078       <span class="stringliteral">", timeRead="</span> &lt;&lt; readTagData.<a class="code" href="classReadTagData.html#2ddf59fc72e69cab98ef6a1fb4eb5dce">m_timeRead</a> &lt;&lt; 
<a name="l00079"></a>00079       <span class="stringliteral">", timeReadSent="</span> &lt;&lt; readTagData.<a class="code" href="classReadTagData.html#a89a4b2f1994a5cdf044db7b2da3d309">m_timeReadSent</a> &lt;&lt; <span class="stringliteral">" ]"</span>;
<a name="l00080"></a>00080 }
<a name="l00081"></a>00081 
<a name="l00085"></a><a class="code" href="classRfidReaderApp.html">00085</a> <span class="keyword">class </span><a class="code" href="classRfidReaderApp.html">RfidReaderApp</a> : <span class="keyword">public</span> <a class="code" href="classApplicationLayer.html">ApplicationLayer</a> {
<a name="l00086"></a><a class="code" href="classRfidReaderApp.html#b72a0a1434a93fb061c8c0299ab69f77">00086</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRfidReaderAppReadEvent.html">RfidReaderAppReadEvent</a>;
<a name="l00087"></a>00087 <span class="keyword">public</span>:
<a name="l00089"></a><a class="code" href="classRfidReaderApp.html#b48fe2fb0c36c2965c93a7ba23c61a82">00089</a>    <span class="keyword">typedef</span> boost::shared_ptr&lt;RfidReaderApp&gt; <a class="code" href="classRfidReaderApp.html#b48fe2fb0c36c2965c93a7ba23c61a82">RfidReaderAppPtr</a>;
<a name="l00091"></a><a class="code" href="classRfidReaderApp.html#08b913f095f7ddf3ae825697e4e050cb">00091</a>    <span class="keyword">typedef</span> multimap&lt;t_uint,ReadTagData&gt;::const_iterator <a class="code" href="classRfidReaderApp.html#08b913f095f7ddf3ae825697e4e050cb">TagIterator</a>;
<a name="l00092"></a>00092 
<a name="l00094"></a>00094    <span class="keyword">virtual</span> <a class="code" href="classRfidReaderApp.html#7ea0e9b00f8cd2b78882e15eb0ccee09">~RfidReaderApp</a>();
<a name="l00095"></a>00095 
<a name="l00100"></a>00100    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classRfidReaderApp.html#b48fe2fb0c36c2965c93a7ba23c61a82">RfidReaderAppPtr</a> <a class="code" href="classRfidReaderApp.html#d72afeaa0a59826cca421540280061f1">create</a>(NodePtr node, 
<a name="l00101"></a>00101       PhysicalLayerPtr physicalLayer);
<a name="l00102"></a>00102 
<a name="l00109"></a>00109    <span class="keyword">virtual</span> <span class="keyword">inline</span> <a class="code" href="classRfidReaderApp.html#b48fe2fb0c36c2965c93a7ba23c61a82">RfidReaderAppPtr</a> <a class="code" href="classRfidReaderApp.html#cb6a8baaacdfbaaefe3e5ee3d85ba3f1">thisRfidReaderApp</a>();
<a name="l00110"></a>00110 
<a name="l00117"></a>00117    <span class="keyword">virtual</span> <span class="keyword">inline</span> <a class="code" href="classApplicationLayer.html#c728f2e1a9279e7210181041c44f54d1">ApplicationLayerPtr</a> <a class="code" href="classRfidReaderApp.html#9dd696a4aad14434ce1a72c1d12b6203">thisApplicationLayer</a>();
<a name="l00118"></a>00118 
<a name="l00125"></a>00125    <span class="keyword">virtual</span> <span class="keyword">inline</span> <a class="code" href="classCommunicationLayer.html#c193c9f1b512787509359eb87ae745c5">SimulationEndListenerPtr</a> <a class="code" href="classRfidReaderApp.html#8bb50077a41feb035b295453154c0951">thisSimulationEndListener</a>();
<a name="l00126"></a>00126 
<a name="l00130"></a>00130    <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#de4ff1c419e4071ec416fe71a5e518d4">startHandler</a>();
<a name="l00131"></a>00131 
<a name="l00135"></a>00135    <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#48c215e46c7a85a29ca3657c97c48d4f">stopHandler</a>();
<a name="l00136"></a>00136 
<a name="l00140"></a>00140    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#d1325ca1b92eb22e65b3bbe2d3572c3c">simulationEndHandler</a>();
<a name="l00141"></a>00141 
<a name="l00148"></a>00148    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#60cf3377d06abe939ac73bfa2a075727">setReadPeriod</a>(<a class="code" href="classSimTime.html">SimTime</a> readPeriod);
<a name="l00149"></a>00149 
<a name="l00155"></a>00155    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#19d3017e1834f65645d86addab44a67a">setDoRepeatedReads</a>(<span class="keywordtype">bool</span> doRepeatedReads);
<a name="l00156"></a>00156 
<a name="l00162"></a>00162    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#39b004dd6dae1cc0e22b51461439603c">setDoReset</a>(<span class="keywordtype">bool</span> doReset);
<a name="l00163"></a>00163 
<a name="l00170"></a>00170    <span class="keyword">inline</span> <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classRfidReaderApp.html#32586e31c1ecd00471e7debe63024c1d">getNextReadTime</a>() <span class="keyword">const</span>;
<a name="l00171"></a>00171 
<a name="l00176"></a>00176    <span class="keyword">inline</span> <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classRfidReaderApp.html#482906d821a8729bbe3d18157d5aef29">getReadPeriod</a>() <span class="keyword">const</span>;
<a name="l00177"></a>00177 
<a name="l00183"></a>00183    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRfidReaderApp.html#37a3468cf9cde45db458da2b1653b5e2">getDoRepeatedReads</a>() <span class="keyword">const</span>;
<a name="l00184"></a>00184 
<a name="l00190"></a>00190    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRfidReaderApp.html#235c8178b31bcc681c1ff018f6bc8690">getDoReset</a>() <span class="keyword">const</span>;
<a name="l00191"></a>00191 
<a name="l00203"></a>00203    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#690e473e32d2caabb512ee658b7bfdc5">setNumPowerControlLevels</a>(<a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> numPowerControlLevels);
<a name="l00204"></a>00204 
<a name="l00211"></a>00211    <span class="keyword">inline</span> <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> <a class="code" href="classRfidReaderApp.html#50ca98ea6851e18e63b4ea4c297d11b7">getNumPowerControlLevels</a>() <span class="keyword">const</span>;
<a name="l00212"></a>00212 
<a name="l00220"></a>00220    <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#d511c3b73622ce876412b1562b0ab454">signalReadEnd</a>();
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="keyword">protected</span>:
<a name="l00223"></a>00223 
<a name="l00225"></a>00225 
<a name="l00226"></a><a class="code" href="classRfidReaderApp.html#36f511666e4a2f7d41857c61f53ae584">00226</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#36f511666e4a2f7d41857c61f53ae584">m_TAGS_READ_COUNT_STRING</a>;
<a name="l00227"></a><a class="code" href="classRfidReaderApp.html#2d0060aa37706a7e0644e98368fef748">00227</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#2d0060aa37706a7e0644e98368fef748">m_TAGS_READ_AT_POWER_COUNT_STRING</a>;
<a name="l00228"></a><a class="code" href="classRfidReaderApp.html#8182b65d59e7798fc208db1ed1ed0cfd">00228</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#8182b65d59e7798fc208db1ed1ed0cfd">m_TAGS_READ_AVG_LATENCY_STRING</a>;
<a name="l00229"></a><a class="code" href="classRfidReaderApp.html#3edcb22a9f2224a6ca474033d94cde8e">00229</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#3edcb22a9f2224a6ca474033d94cde8e">m_TAGS_READ_PROCESS_AVG_LATENCY_STRING</a>;
<a name="l00230"></a><a class="code" href="classRfidReaderApp.html#cd2af600d718e12cd719a75119406ad5">00230</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#cd2af600d718e12cd719a75119406ad5">m_LAST_TAG_READ_LATENCY_STRING</a>;
<a name="l00231"></a><a class="code" href="classRfidReaderApp.html#ca372bb3d9157354e494b86e71a0bc1d">00231</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#ca372bb3d9157354e494b86e71a0bc1d">m_TAG_READ_PROCESS_LATENCY_STRING</a>;
<a name="l00232"></a><a class="code" href="classRfidReaderApp.html#8d3efe43d76180e40c095f90f58876aa">00232</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#8d3efe43d76180e40c095f90f58876aa">m_TAG_READ_LATENCY_STRING</a>;
<a name="l00233"></a><a class="code" href="classRfidReaderApp.html#1cf3bda217143927a6c4db634821bd30">00233</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#1cf3bda217143927a6c4db634821bd30">m_TAG_READ_ID_STRING</a>;
<a name="l00234"></a><a class="code" href="classRfidReaderApp.html#43f68703e93067fc1e19926d63a3ca93">00234</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#43f68703e93067fc1e19926d63a3ca93">m_TAG_READ_LEVEL_STRING</a>;
<a name="l00235"></a><a class="code" href="classRfidReaderApp.html#eae7ab86d1a46867f77e405f65429797">00235</a>    <span class="keyword">static</span> <span class="keyword">const</span> string <a class="code" href="classRfidReaderApp.html#eae7ab86d1a46867f77e405f65429797">m_TAG_READ_TIME_STRING</a>;
<a name="l00237"></a>00237 
<a name="l00239"></a><a class="code" href="classRfidReaderApp.html#3706e16192e0b44af9df57234e5ba0d4">00239</a>    <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classRfidReaderApp.html#3706e16192e0b44af9df57234e5ba0d4">m_firstReadSentTime</a>;
<a name="l00240"></a>00240 
<a name="l00242"></a><a class="code" href="classRfidReaderApp.html#679fa81689a007b11e206a2a5d5fc37b">00242</a>    <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classRfidReaderApp.html#679fa81689a007b11e206a2a5d5fc37b">m_previousReadSentTime</a>;
<a name="l00243"></a>00243 
<a name="l00246"></a><a class="code" href="classRfidReaderApp.html#9072f6ce87cf655b4bffbcbc2e41b658">00246</a>    multimap&lt;t_uint,ReadTagData&gt; <a class="code" href="classRfidReaderApp.html#9072f6ce87cf655b4bffbcbc2e41b658">m_readTags</a>;
<a name="l00247"></a>00247 
<a name="l00249"></a><a class="code" href="classRfidReaderApp.html#84ea314e592c15665f7e39bc0cc6d928">00249</a>    pair&lt;t_uint,ReadTagData&gt; <a class="code" href="classRfidReaderApp.html#84ea314e592c15665f7e39bc0cc6d928">m_lastTagRead</a>;
<a name="l00250"></a>00250 
<a name="l00252"></a><a class="code" href="classRfidReaderApp.html#c58661f820a3978cddf54cae59b50a8d">00252</a>    set&lt;NodeId&gt; <a class="code" href="classRfidReaderApp.html#c58661f820a3978cddf54cae59b50a8d">m_readTagIds</a>;
<a name="l00253"></a>00253 
<a name="l00255"></a>00255    <a class="code" href="classRfidReaderApp.html#e649533f4f7610fb99d23a35ff1d2abf">RfidReaderApp</a>(NodePtr node, PhysicalLayerPtr physicalLayer);
<a name="l00256"></a>00256 
<a name="l00264"></a>00264    <span class="keywordtype">bool</span> <a class="code" href="classRfidReaderApp.html#bb4d0d13fb8d5e6827f137056917e9d2">handleRecvdPacket</a>(PacketPtr packet, <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> sendingLayerIdx);
<a name="l00265"></a>00265 
<a name="l00269"></a>00269    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#ca935314825755a7bcce0863ff15e6b3">doReadProcess</a>();
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="keyword">private</span>: 
<a name="l00272"></a>00272 
<a name="l00274"></a>00274    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> m_DEBUG_POWER_CONTROL = <span class="keyword">true</span>;
<a name="l00275"></a>00275 
<a name="l00278"></a>00278    boost::weak_ptr&lt;RfidReaderApp&gt; m_weakThis;
<a name="l00279"></a>00279 
<a name="l00281"></a>00281    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> m_DEFAULT_READ_PERIOD;
<a name="l00282"></a>00282 
<a name="l00284"></a>00284    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> m_DEFAULT_NUM_POWER_CONTROL_LEVELS;
<a name="l00285"></a>00285 
<a name="l00287"></a>00287    PhysicalLayerPtr m_physicalLayer;
<a name="l00288"></a>00288 
<a name="l00290"></a>00290    TimerPtr m_readTimer;
<a name="l00291"></a>00291 
<a name="l00295"></a>00295    <a class="code" href="classSimTime.html">SimTime</a> m_readPeriod;
<a name="l00296"></a>00296 
<a name="l00301"></a>00301    <span class="keywordtype">bool</span> m_doRepeatedReads;
<a name="l00302"></a>00302 
<a name="l00307"></a>00307    <span class="keywordtype">bool</span> m_doReset;
<a name="l00308"></a>00308 
<a name="l00310"></a>00310    <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> m_numPowerControlLevels;
<a name="l00311"></a>00311 
<a name="l00313"></a>00313    <span class="keywordtype">double</span> m_maxTxPower;
<a name="l00314"></a>00314 
<a name="l00317"></a>00317    <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> m_currentTxPowerLevel;
<a name="l00318"></a>00318 
<a name="l00324"></a>00324    <span class="keywordtype">void</span> sendReadPacket(<span class="keywordtype">double</span> txPower);
<a name="l00325"></a>00325 
<a name="l00329"></a>00329    <span class="keywordtype">void</span> sendResetPacket();
<a name="l00330"></a>00330 
<a name="l00335"></a>00335    <span class="keywordtype">void</span> doNextRead();
<a name="l00336"></a>00336 
<a name="l00337"></a>00337 };
<a name="l00338"></a>00338 <span class="keyword">typedef</span> boost::shared_ptr&lt;RfidReaderApp&gt; RfidReaderAppPtr;
<a name="l00339"></a>00339 
<a name="l00341"></a>00341 <span class="comment">// Event Subclasses</span>
<a name="l00343"></a>00343 <span class="comment"></span>
<a name="l00348"></a><a class="code" href="classRfidReaderAppReadEvent.html">00348</a> <span class="keyword">class </span><a class="code" href="classRfidReaderAppReadEvent.html">RfidReaderAppReadEvent</a> : <span class="keyword">public</span> <a class="code" href="classEvent.html">Event</a> {
<a name="l00349"></a>00349 <span class="keyword">public</span>:
<a name="l00351"></a>00351    <span class="keyword">typedef</span> boost::shared_ptr&lt;RfidReaderAppReadEvent&gt; 
<a name="l00352"></a><a class="code" href="classRfidReaderAppReadEvent.html#cde0607a9081696b30d79ca8fa743297">00352</a>       <a class="code" href="classRfidReaderAppReadEvent.html#cde0607a9081696b30d79ca8fa743297">RfidReaderAppReadEventPtr</a>;
<a name="l00353"></a>00353 
<a name="l00358"></a><a class="code" href="classRfidReaderAppReadEvent.html#43535002c4637262f2230dbe11b9637f">00358</a>    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classRfidReaderAppReadEvent.html#cde0607a9081696b30d79ca8fa743297">RfidReaderAppReadEventPtr</a> <a class="code" href="classRfidReaderAppReadEvent.html#43535002c4637262f2230dbe11b9637f">create</a>(
<a name="l00359"></a>00359       RfidReaderAppPtr readerApp)
<a name="l00360"></a>00360    {
<a name="l00361"></a>00361       <a class="code" href="classRfidReaderAppReadEvent.html#cde0607a9081696b30d79ca8fa743297">RfidReaderAppReadEventPtr</a> p(<span class="keyword">new</span> <a class="code" href="classRfidReaderAppReadEvent.html#c2990a3cc5d34048858317896d474c80">RfidReaderAppReadEvent</a>(readerApp));
<a name="l00362"></a>00362       <span class="keywordflow">return</span> p;
<a name="l00363"></a>00363    }
<a name="l00364"></a>00364 
<a name="l00365"></a><a class="code" href="classRfidReaderAppReadEvent.html#e0256ca851f172e09cb950c5c3d5d656">00365</a>    <span class="keywordtype">void</span> <a class="code" href="classRfidReaderAppReadEvent.html#e0256ca851f172e09cb950c5c3d5d656">execute</a>()
<a name="l00366"></a>00366    {
<a name="l00367"></a>00367       m_readerApp-&gt;doReadProcess();
<a name="l00368"></a>00368    }
<a name="l00369"></a>00369 
<a name="l00370"></a>00370 <span class="keyword">protected</span>:
<a name="l00372"></a><a class="code" href="classRfidReaderAppReadEvent.html#c2990a3cc5d34048858317896d474c80">00372</a>    <a class="code" href="classRfidReaderAppReadEvent.html#c2990a3cc5d34048858317896d474c80">RfidReaderAppReadEvent</a>(RfidReaderAppPtr readerApp) 
<a name="l00373"></a>00373       : <a class="code" href="classEvent.html">Event</a>()
<a name="l00374"></a>00374    { 
<a name="l00375"></a>00375       m_readerApp = readerApp;
<a name="l00376"></a>00376    }
<a name="l00377"></a>00377 <span class="keyword">private</span>:
<a name="l00378"></a>00378    RfidReaderAppPtr m_readerApp;
<a name="l00379"></a>00379 };
<a name="l00380"></a>00380 <span class="keyword">typedef</span> boost::shared_ptr&lt;RfidReaderAppReadEvent&gt; 
<a name="l00381"></a>00381    RfidReaderAppReadEventPtr;
<a name="l00382"></a>00382 
<a name="l00384"></a>00384 <span class="comment">// Back to RfidReaderApp Class</span>
<a name="l00386"></a>00386 <span class="comment"></span>
<a name="l00388"></a>00388 <span class="comment">// Inline Functions</span>
<a name="l00390"></a>00390 <span class="comment"></span>
<a name="l00391"></a><a class="code" href="classRfidReaderApp.html#d72afeaa0a59826cca421540280061f1">00391</a> <span class="keyword">inline</span> RfidReaderAppPtr <a class="code" href="classRfidReaderApp.html#d72afeaa0a59826cca421540280061f1">RfidReaderApp::create</a>(NodePtr node, 
<a name="l00392"></a>00392    PhysicalLayerPtr physicalLayer)
<a name="l00393"></a>00393 {
<a name="l00394"></a>00394    <a class="code" href="classRfidReaderApp.html#b48fe2fb0c36c2965c93a7ba23c61a82">RfidReaderAppPtr</a> p(<span class="keyword">new</span> <a class="code" href="classRfidReaderApp.html#e649533f4f7610fb99d23a35ff1d2abf">RfidReaderApp</a>(node, physicalLayer));
<a name="l00395"></a>00395    <span class="comment">// weakThis *must* be set before the thisReaderApp</span>
<a name="l00396"></a>00396    <span class="comment">// function is called.</span>
<a name="l00397"></a>00397    p-&gt;m_weakThis = p;
<a name="l00398"></a>00398    RfidReaderAppReadEventPtr readEvent = 
<a name="l00399"></a>00399       <a class="code" href="classRfidReaderAppReadEvent.html#43535002c4637262f2230dbe11b9637f">RfidReaderAppReadEvent::create</a>(p-&gt;thisRfidReaderApp());
<a name="l00400"></a>00400    p-&gt;m_readTimer = <a class="code" href="classTimer.html#1cd798163c2144aff0172a0c09d712ba">Timer::create</a>(p-&gt;getNode(), readEvent);
<a name="l00401"></a>00401 
<a name="l00402"></a>00402    <a class="code" href="classSimulator.html#bbe443394a220bdf2d78dae21427e2ff">Simulator::instance</a>()-&gt;<a class="code" href="classSimulator.html#fe651dc2a3e749aaa15266d8bc039c7b">addSimulationEndListener</a>(
<a name="l00403"></a>00403       p-&gt;thisSimulationEndListener());
<a name="l00404"></a>00404 
<a name="l00405"></a>00405    <span class="keywordflow">return</span> p;
<a name="l00406"></a>00406 }
<a name="l00407"></a>00407 
<a name="l00408"></a><a class="code" href="classRfidReaderApp.html#cb6a8baaacdfbaaefe3e5ee3d85ba3f1">00408</a> <span class="keyword">inline</span> RfidReaderAppPtr <a class="code" href="classRfidReaderApp.html#cb6a8baaacdfbaaefe3e5ee3d85ba3f1">RfidReaderApp::thisRfidReaderApp</a>()
<a name="l00409"></a>00409 {
<a name="l00410"></a>00410    <a class="code" href="classRfidReaderApp.html#b48fe2fb0c36c2965c93a7ba23c61a82">RfidReaderAppPtr</a> p(m_weakThis);
<a name="l00411"></a>00411    <span class="keywordflow">return</span> p;
<a name="l00412"></a>00412 }
<a name="l00413"></a>00413 
<a name="l00414"></a><a class="code" href="classRfidReaderApp.html#9dd696a4aad14434ce1a72c1d12b6203">00414</a> <span class="keyword">inline</span> ApplicationLayerPtr <a class="code" href="classRfidReaderApp.html#9dd696a4aad14434ce1a72c1d12b6203">RfidReaderApp::thisApplicationLayer</a>()
<a name="l00415"></a>00415 {
<a name="l00416"></a>00416    <a class="code" href="classApplicationLayer.html#c728f2e1a9279e7210181041c44f54d1">ApplicationLayerPtr</a> p(m_weakThis);
<a name="l00417"></a>00417    <span class="keywordflow">return</span> p;
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a><a class="code" href="classRfidReaderApp.html#8bb50077a41feb035b295453154c0951">00420</a> <span class="keyword">inline</span> SimulationEndListenerPtr <a class="code" href="classRfidReaderApp.html#8bb50077a41feb035b295453154c0951">RfidReaderApp::thisSimulationEndListener</a>()
<a name="l00421"></a>00421 {
<a name="l00422"></a>00422    <a class="code" href="classCommunicationLayer.html#c193c9f1b512787509359eb87ae745c5">SimulationEndListenerPtr</a> p(m_weakThis);
<a name="l00423"></a>00423    <span class="keywordflow">return</span> p;
<a name="l00424"></a>00424 }
<a name="l00425"></a><a class="code" href="classRfidReaderApp.html#60cf3377d06abe939ac73bfa2a075727">00425</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#60cf3377d06abe939ac73bfa2a075727">RfidReaderApp::setReadPeriod</a>(<a class="code" href="classSimTime.html">SimTime</a> readPeriod)
<a name="l00426"></a>00426 {
<a name="l00427"></a>00427    m_readPeriod = readPeriod;
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 
<a name="l00430"></a><a class="code" href="classRfidReaderApp.html#19d3017e1834f65645d86addab44a67a">00430</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#19d3017e1834f65645d86addab44a67a">RfidReaderApp::setDoRepeatedReads</a>(<span class="keywordtype">bool</span> doRepeatedReads)
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432    m_doRepeatedReads = doRepeatedReads;
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00435"></a><a class="code" href="classRfidReaderApp.html#39b004dd6dae1cc0e22b51461439603c">00435</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#39b004dd6dae1cc0e22b51461439603c">RfidReaderApp::setDoReset</a>(<span class="keywordtype">bool</span> doReset)
<a name="l00436"></a>00436 {
<a name="l00437"></a>00437    m_doReset = doReset;
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00440"></a><a class="code" href="classRfidReaderApp.html#32586e31c1ecd00471e7debe63024c1d">00440</a> <span class="keyword">inline</span> <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classRfidReaderApp.html#32586e31c1ecd00471e7debe63024c1d">RfidReaderApp::getNextReadTime</a>()<span class="keyword"> const</span>
<a name="l00441"></a>00441 <span class="keyword"></span>{
<a name="l00442"></a>00442    <a class="code" href="classSimTime.html">SimTime</a> nextReadTime(0.0);
<a name="l00443"></a>00443    <span class="keywordflow">if</span>(m_readTimer-&gt;isRunning()) {
<a name="l00444"></a>00444       nextReadTime = (m_readTimer-&gt;timeRemaining() + 
<a name="l00445"></a>00445          <a class="code" href="classSimulator.html#bbe443394a220bdf2d78dae21427e2ff">Simulator::instance</a>()-&gt;<a class="code" href="classSimulator.html#38184caa07e9ec6a1f78d9092f6af4c9">currentTime</a>());
<a name="l00446"></a>00446    }
<a name="l00447"></a>00447    <span class="keywordflow">return</span> nextReadTime;
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="classRfidReaderApp.html#482906d821a8729bbe3d18157d5aef29">00450</a> <span class="keyword">inline</span> <a class="code" href="classSimTime.html">SimTime</a> <a class="code" href="classRfidReaderApp.html#482906d821a8729bbe3d18157d5aef29">RfidReaderApp::getReadPeriod</a>()<span class="keyword"> const</span>
<a name="l00451"></a>00451 <span class="keyword"></span>{
<a name="l00452"></a>00452    <span class="keywordflow">return</span> m_readPeriod;
<a name="l00453"></a>00453 }
<a name="l00454"></a>00454 
<a name="l00455"></a><a class="code" href="classRfidReaderApp.html#37a3468cf9cde45db458da2b1653b5e2">00455</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRfidReaderApp.html#37a3468cf9cde45db458da2b1653b5e2">RfidReaderApp::getDoRepeatedReads</a>()<span class="keyword"> const</span>
<a name="l00456"></a>00456 <span class="keyword"></span>{
<a name="l00457"></a>00457    <span class="keywordflow">return</span> m_doRepeatedReads;
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a><a class="code" href="classRfidReaderApp.html#235c8178b31bcc681c1ff018f6bc8690">00460</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRfidReaderApp.html#235c8178b31bcc681c1ff018f6bc8690">RfidReaderApp::getDoReset</a>()<span class="keyword"> const</span>
<a name="l00461"></a>00461 <span class="keyword"></span>{
<a name="l00462"></a>00462    <span class="keywordflow">return</span> m_doReset;
<a name="l00463"></a>00463 }
<a name="l00464"></a>00464 
<a name="l00465"></a><a class="code" href="classRfidReaderApp.html#690e473e32d2caabb512ee658b7bfdc5">00465</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderApp.html#690e473e32d2caabb512ee658b7bfdc5">RfidReaderApp::setNumPowerControlLevels</a>(
<a name="l00466"></a>00466    <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> numPowerControlLevels)
<a name="l00467"></a>00467 {
<a name="l00468"></a>00468    assert(numPowerControlLevels &gt; 0);
<a name="l00469"></a>00469    m_numPowerControlLevels = numPowerControlLevels;
<a name="l00470"></a>00470 }
<a name="l00471"></a>00471 
<a name="l00472"></a><a class="code" href="classRfidReaderApp.html#50ca98ea6851e18e63b4ea4c297d11b7">00472</a> <span class="keyword">inline</span> <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> <a class="code" href="classRfidReaderApp.html#50ca98ea6851e18e63b4ea4c297d11b7">RfidReaderApp::getNumPowerControlLevels</a>()<span class="keyword"> const</span>
<a name="l00473"></a>00473 <span class="keyword"></span>{
<a name="l00474"></a>00474    <span class="keywordflow">return</span> m_numPowerControlLevels;
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00478"></a>00478 <span class="comment">// Overloaded Operators</span>
<a name="l00480"></a>00480 <span class="comment"></span>
<a name="l00482"></a>00482 <span class="comment">// PacketData Subclass</span>
<a name="l00484"></a>00484 <span class="comment"></span>
<a name="l00489"></a><a class="code" href="classRfidReaderAppData.html">00489</a> <span class="keyword">class </span><a class="code" href="classRfidReaderAppData.html">RfidReaderAppData</a> : <span class="keyword">public</span> <a class="code" href="classPacketData.html">PacketData</a> {
<a name="l00490"></a>00490 <span class="keyword">public</span>:
<a name="l00492"></a><a class="code" href="classRfidReaderAppData.html#d662ccfe0afb506f9dee5ee1e5603901">00492</a>    <span class="keyword">typedef</span> boost::shared_ptr&lt;RfidReaderAppData&gt; <a class="code" href="classRfidReaderAppData.html#d662ccfe0afb506f9dee5ee1e5603901">RfidReaderAppDataPtr</a>;
<a name="l00493"></a>00493 
<a name="l00498"></a><a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">00498</a>    <span class="keyword">enum</span> <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">Types</a> {
<a name="l00499"></a>00499       <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936f3c058dc08d0a16d3f349e2fff4a9f9f">Types_NoType</a>, 
<a name="l00500"></a>00500       <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936c46f4decb70ae02b42387dbf2308b477">Types_Read</a>, 
<a name="l00501"></a><a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936a43996ebb3977b43f3f18e69702fdb6e">00501</a>       <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936a43996ebb3977b43f3f18e69702fdb6e">Types_Reset</a> 
<a name="l00502"></a>00502    };
<a name="l00503"></a>00503 
<a name="l00508"></a>00508    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classRfidReaderAppData.html#d662ccfe0afb506f9dee5ee1e5603901">RfidReaderAppDataPtr</a> <a class="code" href="classRfidReaderAppData.html#f16c14675522fd6bf52688828920f6f8">create</a>();
<a name="l00509"></a>00509 
<a name="l00514"></a>00514    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classRfidReaderAppData.html#d662ccfe0afb506f9dee5ee1e5603901">RfidReaderAppDataPtr</a> <a class="code" href="classRfidReaderAppData.html#f16c14675522fd6bf52688828920f6f8">create</a>(
<a name="l00515"></a>00515       <span class="keyword">const</span> <a class="code" href="classRfidReaderAppData.html">RfidReaderAppData</a>&amp; rhs);
<a name="l00516"></a>00516 
<a name="l00521"></a>00521    <span class="keyword">virtual</span> <span class="keyword">inline</span> <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> <a class="code" href="classRfidReaderAppData.html#77263b9a9467130801da5cfe5e40700a">getSizeInBytes</a>() <span class="keyword">const</span>;
<a name="l00522"></a>00522 
<a name="l00527"></a>00527    <span class="keywordtype">void</span> <a class="code" href="classRfidReaderAppData.html#ad05f2c039cdc5e35791ad779b45c677">setReaderId</a>(<span class="keyword">const</span> <a class="code" href="classNodeId.html">NodeId</a>&amp; nodeId);
<a name="l00528"></a>00528 
<a name="l00533"></a>00533    <a class="code" href="classNodeId.html">NodeId</a> <a class="code" href="classRfidReaderAppData.html#6a0c9d20e0303a92c3c8d4607849c3d4">getReaderId</a>() <span class="keyword">const</span>;
<a name="l00534"></a>00534 
<a name="l00539"></a>00539    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderAppData.html#f19932736161a0169a70099a5788fe39">setType</a>(<a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">Types</a> type);
<a name="l00540"></a>00540 
<a name="l00545"></a>00545    <span class="keyword">inline</span> <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">Types</a> <a class="code" href="classRfidReaderAppData.html#246457d64892db971eca0f4482770c6c">getType</a>() <span class="keyword">const</span>;
<a name="l00546"></a>00546 
<a name="l00556"></a>00556    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderAppData.html#f1f7497db53dffa96c8295d04e868de0">setDoEntireReadCycle</a>(<span class="keywordtype">bool</span> doEntireReadCycle);
<a name="l00557"></a>00557 
<a name="l00567"></a>00567    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRfidReaderAppData.html#361e84865c9c2293b66eb0f19803ade0">getDoEntireReadCycle</a>() <span class="keyword">const</span>;
<a name="l00568"></a>00568 
<a name="l00572"></a>00572    <span class="keyword">inline</span> ostream&amp; <a class="code" href="classRfidReaderAppData.html#660061eebe39f45cc902402fa670da35">print</a>(ostream&amp; s) <span class="keyword">const</span>;
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 <span class="keyword">protected</span>:
<a name="l00575"></a>00575 
<a name="l00577"></a>00577    <a class="code" href="classRfidReaderAppData.html#4f3f584e721ff902330210b30f8238a1">RfidReaderAppData</a>();
<a name="l00578"></a>00578 
<a name="l00580"></a>00580    <a class="code" href="classRfidReaderAppData.html#4f3f584e721ff902330210b30f8238a1">RfidReaderAppData</a>(<span class="keyword">const</span> <a class="code" href="classRfidReaderAppData.html">RfidReaderAppData</a>&amp; rhs);
<a name="l00581"></a>00581 
<a name="l00588"></a>00588    <span class="keyword">virtual</span> <a class="code" href="classPacketData.html#906e630e0d65c95c12eca3ee045ffe63">PacketDataPtr</a> <a class="code" href="classRfidReaderAppData.html#1c473b9597db1f246869f53869237853">clone</a>() <span class="keyword">const</span>;
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 <span class="keyword">private</span>:
<a name="l00591"></a>00591 
<a name="l00593"></a>00593    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> m_nodeIdBytes = 4;
<a name="l00594"></a>00594 
<a name="l00596"></a>00596    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> m_typeBytes = 1;
<a name="l00597"></a>00597 
<a name="l00599"></a>00599    <a class="code" href="utility_8hpp.html#0a4a98abf39e826ef67f8c547f3c9be5">t_uchar</a> m_nodeId[m_nodeIdBytes];
<a name="l00600"></a>00600 
<a name="l00602"></a>00602    <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">Types</a> m_type;
<a name="l00603"></a>00603 
<a name="l00608"></a>00608    <span class="keywordtype">bool</span> m_doEntireReadCycle;
<a name="l00609"></a>00609 
<a name="l00610"></a>00610 };
<a name="l00611"></a>00611 <span class="keyword">typedef</span> boost::shared_ptr&lt;RfidReaderAppData&gt; RfidReaderAppDataPtr;
<a name="l00612"></a>00612 
<a name="l00614"></a>00614 <span class="comment">// Inline Functions</span>
<a name="l00616"></a>00616 <span class="comment"></span>
<a name="l00617"></a><a class="code" href="classRfidReaderAppData.html#f16c14675522fd6bf52688828920f6f8">00617</a> <span class="keyword">inline</span> RfidReaderAppDataPtr <a class="code" href="classRfidReaderAppData.html#f16c14675522fd6bf52688828920f6f8">RfidReaderAppData::create</a>()
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619    <a class="code" href="classRfidReaderAppData.html#d662ccfe0afb506f9dee5ee1e5603901">RfidReaderAppDataPtr</a> p(<span class="keyword">new</span> <a class="code" href="classRfidReaderAppData.html#4f3f584e721ff902330210b30f8238a1">RfidReaderAppData</a>());
<a name="l00620"></a>00620    <span class="keywordflow">return</span> p;
<a name="l00621"></a>00621 }
<a name="l00622"></a>00622 
<a name="l00623"></a><a class="code" href="classRfidReaderAppData.html#13ae3aa3760567f986aa90339c684c1d">00623</a> <span class="keyword">inline</span> RfidReaderAppDataPtr <a class="code" href="classRfidReaderAppData.html#f16c14675522fd6bf52688828920f6f8">RfidReaderAppData::create</a>(
<a name="l00624"></a>00624    <span class="keyword">const</span> <a class="code" href="classRfidReaderAppData.html">RfidReaderAppData</a>&amp; rhs)
<a name="l00625"></a>00625 {
<a name="l00626"></a>00626    <a class="code" href="classRfidReaderAppData.html#d662ccfe0afb506f9dee5ee1e5603901">RfidReaderAppDataPtr</a> p = 
<a name="l00627"></a>00627       boost::dynamic_pointer_cast&lt;RfidReaderAppData&gt;(rhs.<a class="code" href="classRfidReaderAppData.html#1c473b9597db1f246869f53869237853">clone</a>());
<a name="l00628"></a>00628    <span class="comment">// If the shared_ptr is empty, then the cast failed.</span>
<a name="l00629"></a>00629    assert(p.get() != 0);
<a name="l00630"></a>00630    <span class="keywordflow">return</span> p;
<a name="l00631"></a>00631 }
<a name="l00632"></a>00632 
<a name="l00633"></a><a class="code" href="classRfidReaderAppData.html#77263b9a9467130801da5cfe5e40700a">00633</a> <span class="keyword">inline</span> <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> <a class="code" href="classRfidReaderAppData.html#77263b9a9467130801da5cfe5e40700a">RfidReaderAppData::getSizeInBytes</a>()<span class="keyword"> const</span>
<a name="l00634"></a>00634 <span class="keyword"></span>{
<a name="l00635"></a>00635    <a class="code" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> byteCount = (m_nodeIdBytes + m_typeBytes);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637    <span class="keywordflow">switch</span>(<a class="code" href="classRfidReaderAppData.html#246457d64892db971eca0f4482770c6c">getType</a>()) {
<a name="l00638"></a>00638    <span class="keywordflow">default</span>:
<a name="l00639"></a>00639       <span class="keywordflow">break</span>;
<a name="l00640"></a>00640    }
<a name="l00641"></a>00641 
<a name="l00642"></a>00642    <span class="keywordflow">return</span> byteCount;
<a name="l00643"></a>00643 }
<a name="l00644"></a>00644 
<a name="l00645"></a><a class="code" href="classRfidReaderAppData.html#f19932736161a0169a70099a5788fe39">00645</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderAppData.html#f19932736161a0169a70099a5788fe39">RfidReaderAppData::setType</a>(<a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">RfidReaderAppData::Types</a> type)
<a name="l00646"></a>00646 {
<a name="l00647"></a>00647    m_type = type;
<a name="l00648"></a>00648 }
<a name="l00649"></a>00649 
<a name="l00650"></a><a class="code" href="classRfidReaderAppData.html#246457d64892db971eca0f4482770c6c">00650</a> <span class="keyword">inline</span> <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">RfidReaderAppData::Types</a> <a class="code" href="classRfidReaderAppData.html#246457d64892db971eca0f4482770c6c">RfidReaderAppData::getType</a>()<span class="keyword"> const</span>
<a name="l00651"></a>00651 <span class="keyword"></span>{
<a name="l00652"></a>00652    <span class="keywordflow">return</span> m_type;
<a name="l00653"></a>00653 }
<a name="l00654"></a>00654 
<a name="l00655"></a><a class="code" href="classRfidReaderAppData.html#f1f7497db53dffa96c8295d04e868de0">00655</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRfidReaderAppData.html#f1f7497db53dffa96c8295d04e868de0">RfidReaderAppData::setDoEntireReadCycle</a>(
<a name="l00656"></a>00656    <span class="keywordtype">bool</span> doEntireReadCycle)
<a name="l00657"></a>00657 {
<a name="l00658"></a>00658    m_doEntireReadCycle = doEntireReadCycle;
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 
<a name="l00661"></a><a class="code" href="classRfidReaderAppData.html#361e84865c9c2293b66eb0f19803ade0">00661</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRfidReaderAppData.html#361e84865c9c2293b66eb0f19803ade0">RfidReaderAppData::getDoEntireReadCycle</a>()<span class="keyword"> const</span>
<a name="l00662"></a>00662 <span class="keyword"></span>{
<a name="l00663"></a>00663    <span class="keywordflow">return</span> m_doEntireReadCycle;
<a name="l00664"></a>00664 }
<a name="l00665"></a>00665 
<a name="l00667"></a>00667 <span class="comment">// Overloaded Operators</span>
<a name="l00669"></a>00669 <span class="comment"></span>
<a name="l00670"></a>00670 <span class="keyword">inline</span> ostream&amp; operator&lt;&lt; (ostream&amp; s, 
<a name="l00671"></a>00671       <span class="keyword">const</span> <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936">RfidReaderAppData::Types</a>&amp; dataType)
<a name="l00672"></a>00672 {
<a name="l00673"></a>00673    <span class="keywordflow">switch</span>(dataType) {
<a name="l00674"></a>00674    <span class="keywordflow">case</span> <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936f3c058dc08d0a16d3f349e2fff4a9f9f">RfidReaderAppData::Types_NoType</a>:
<a name="l00675"></a>00675       s &lt;&lt; <span class="stringliteral">"NO_TYPE"</span>;
<a name="l00676"></a>00676       <span class="keywordflow">break</span>;
<a name="l00677"></a>00677    <span class="keywordflow">case</span> <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936c46f4decb70ae02b42387dbf2308b477">RfidReaderAppData::Types_Read</a>:
<a name="l00678"></a>00678       s &lt;&lt; <span class="stringliteral">"READ"</span>;
<a name="l00679"></a>00679       <span class="keywordflow">break</span>;
<a name="l00680"></a>00680    <span class="keywordflow">case</span> <a class="code" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936a43996ebb3977b43f3f18e69702fdb6e">RfidReaderAppData::Types_Reset</a>:
<a name="l00681"></a>00681       s &lt;&lt; <span class="stringliteral">"RESET"</span>;
<a name="l00682"></a>00682       <span class="keywordflow">break</span>;
<a name="l00683"></a>00683    }
<a name="l00684"></a>00684    <span class="keywordflow">return</span> s;
<a name="l00685"></a>00685 }
<a name="l00686"></a>00686 
<a name="l00687"></a><a class="code" href="classRfidReaderAppData.html#660061eebe39f45cc902402fa670da35">00687</a> <span class="keyword">inline</span> ostream&amp; <a class="code" href="classRfidReaderAppData.html#660061eebe39f45cc902402fa670da35">RfidReaderAppData::print</a>(ostream&amp; s)<span class="keyword"> const</span>
<a name="l00688"></a>00688 <span class="keyword"></span>{
<a name="l00689"></a>00689    s &lt;&lt; <span class="stringliteral">"type="</span> &lt;&lt; m_type &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt;
<a name="l00690"></a>00690       <span class="stringliteral">"nodeId="</span> &lt;&lt; <a class="code" href="classNodeId.html">NodeId</a>(m_nodeId, m_nodeIdBytes);
<a name="l00691"></a>00691    <span class="keywordflow">return</span> s;
<a name="l00692"></a>00692 }
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 <span class="preprocessor">#endif // RFID_READER_APP_H</span>
<a name="l00695"></a>00695 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Dec 12 17:04:38 2006 for rfidsim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
