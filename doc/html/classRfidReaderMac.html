<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>rfidsim: RfidReaderMac Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>RfidReaderMac Class Reference</h1><!-- doxytag: class="RfidReaderMac" --><!-- doxytag: inherits="SlottedMac" -->A MAC protocol for RFID readers that uses slotted ALOHA.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>&gt;</code>
<p>
<p>Inheritance diagram for RfidReaderMac:
<p><center><img src="classRfidReaderMac.png" usemap="#RfidReaderMac_map" border="0" alt=""></center>
<map name="RfidReaderMac_map">
<area href="classSlottedMac.html" alt="SlottedMac" shape="rect" coords="0,112,136,136">
<area href="classMacProtocol.html" alt="MacProtocol" shape="rect" coords="0,56,136,80">
<area href="classSimulationEndListener.html" alt="SimulationEndListener" shape="rect" coords="0,0,136,24">
</map>
<a href="classRfidReaderMac-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6f36ba2cda0526db8ebba0037b018b38"></a><!-- doxytag: member="RfidReaderMac::RfidReaderMacPtr" ref="6f36ba2cda0526db8ebba0037b018b38" args="" -->
typedef boost::shared_ptr&lt;<br>
 <a class="el" href="classRfidReaderMac.html">RfidReaderMac</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#6f36ba2cda0526db8ebba0037b018b38">RfidReaderMacPtr</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Smart pointer that clients should use. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3cd59ae953c972ec72670d377f615ccd"></a><!-- doxytag: member="RfidReaderMac::~RfidReaderMac" ref="3cd59ae953c972ec72670d377f615ccd" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#3cd59ae953c972ec72670d377f615ccd">~RfidReaderMac</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classRfidReaderMac.html#6f36ba2cda0526db8ebba0037b018b38">RfidReaderMacPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#49a14ba698e23ae64e79a990dd57cbe8">thisRfidReaderMac</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gives <code>this</code> pointer as a <code><a class="el" href="classRfidReaderMac.html">RfidReaderMac</a></code> object.  <a href="#49a14ba698e23ae64e79a990dd57cbe8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classSlottedMac.html#2017056aae90ca668491d299866cb0e9">SlottedMacPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#833baa01bf1532b4616092c6117aa3c2">thisSlottedMac</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gives <code>this</code> pointer as a <code><a class="el" href="classSlottedMac.html">SlottedMac</a></code> object.  <a href="#833baa01bf1532b4616092c6117aa3c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classMacProtocol.html#0ac9382050c88b43fb031ef3f68be3ad">MacProtocolPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#764e0cf20bf9329d40bdf1136575f78b">thisMacProtocol</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gives <code>this</code> pointer as a <code><a class="el" href="classMacProtocol.html">MacProtocol</a></code> object.  <a href="#764e0cf20bf9329d40bdf1136575f78b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classMacProtocol.html#ed2eaef6e19ef3fddf18da588914e8df">SimulationEndListenerPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#da89bb83471e99ea2011e61e8b694fc3">thisSimulationEndListener</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gives <code>this</code> pointer as a <code>SimulationEndListenerPtr</code> object.  <a href="#da89bb83471e99ea2011e61e8b694fc3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1539767ae06e6fab8ae70546f0111576"></a><!-- doxytag: member="RfidReaderMac::simulationEndHandler" ref="1539767ae06e6fab8ae70546f0111576" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#1539767ae06e6fab8ae70546f0111576">simulationEndHandler</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The function called when the simulation ends. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#a97095861207185bac75004923f7896c">handleRecvdMacPacket</a> (PacketPtr packet, <a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> sendingLayerIdx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle a MAC packet that is received.  <a href="#a97095861207185bac75004923f7896c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#d73bb89c776e85c06cf7e8cc8c92af86">handleRecvdUpperLayerPacket</a> (PacketPtr packet, <a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> sendingLayerIdx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle a packet received from an upper layer.  <a href="#d73bb89c776e85c06cf7e8cc8c92af86"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#ee6687bd966a9c13bdddb0e5adfc3d3a">handleChannelBusy</a> (PacketPtr packet)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is called when the MAC is scheduled to transmit a packet on the channel but the channel is busy.  <a href="#ee6687bd966a9c13bdddb0e5adfc3d3a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#894d31adb55474a7d4ddf2f2a70cb035">handlePacketSent</a> (PacketPtr packet)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is called when the MAC is scheduled to transmit a packet on the channel and it is sent on the channel.  <a href="#894d31adb55474a7d4ddf2f2a70cb035"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="classRfidReaderMac.html#6f36ba2cda0526db8ebba0037b018b38">RfidReaderMacPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#de9230a8e1cbc2a45e9561581a98452b">create</a> (NodePtr node, RfidReaderAppPtr readerApp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A factory method to ensure that all objects are created via <code>new</code> since we are using smart pointers.  <a href="#de9230a8e1cbc2a45e9561581a98452b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="97a2ffd287aedeec682338ae88269f9b"></a><!-- doxytag: member="RfidReaderMac::RfidReaderMac" ref="97a2ffd287aedeec682338ae88269f9b" args="(NodePtr node, RfidReaderAppPtr readerApp)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#97a2ffd287aedeec682338ae88269f9b">RfidReaderMac</a> (NodePtr node, RfidReaderAppPtr readerApp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A constructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a47e9b5a8f6fe1f2d2a9d529e1fcd2e5"></a><!-- doxytag: member="RfidReaderMac::beginSlotEvent" ref="a47e9b5a8f6fe1f2d2a9d529e1fcd2e5" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#a47e9b5a8f6fe1f2d2a9d529e1fcd2e5">beginSlotEvent</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The function called when a slot begins. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="182e9934569a4c318a7da6f9c910284b"></a><!-- doxytag: member="RfidReaderMac::endRequestCycleEvent" ref="182e9934569a4c318a7da6f9c910284b" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#182e9934569a4c318a7da6f9c910284b">endRequestCycleEvent</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The function called when a request cycle ends. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PacketPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#1c49eb5ba1a54f3873ea4bb81647a00e">createRequestPacket</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a request packet for the node.  <a href="#1c49eb5ba1a54f3873ea4bb81647a00e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PacketPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#bada4f766e338f31a9c493d4fae35e7d">createAckPacket</a> (<a class="el" href="classNodeId.html">NodeId</a> destination) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a acknowledgement packet for the node.  <a href="#bada4f766e338f31a9c493d4fae35e7d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#376bab78bbb08ad633de239e75ee206f">addGenericHeader</a> (PacketPtr packet, <a class="el" href="classNodeId.html">NodeId</a> receiverId) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a generic header to the packet.  <a href="#376bab78bbb08ad633de239e75ee206f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#feff7c6515d438329fb07fc3d501df0f">addSelectHeader</a> (PacketPtr packet, <a class="el" href="classNodeId.html">NodeId</a> receiverId) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a <code>SELECT</code> header to the packet.  <a href="#feff7c6515d438329fb07fc3d501df0f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#59a3015c9245de8e5d175a3f87d88fc3">packetIsForMe</a> (RfidTagMacDataPtr macData) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the packet is for me based on the receiver address (i.e., has my address or the broadcast address).  <a href="#59a3015c9245de8e5d175a3f87d88fc3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#3cf257bb90140675aa8b816d990b1a01">isEnoughTimeForContentionCycle</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if there is enough time left in the current request cycle to start a new contention cycle.  <a href="#3cf257bb90140675aa8b816d990b1a01"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4b159194237788b20414685da79eec26"></a><!-- doxytag: member="RfidReaderMac::startNextContentionCycle" ref="4b159194237788b20414685da79eec26" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#4b159194237788b20414685da79eec26">startNextContentionCycle</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send out a request packet to start a new contention cycle. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#495e072c23f342f07ac500fb767919c0">isPacketType</a> (PacketPtr packet, <a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad">RfidReaderMacData::Types</a> type) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine whether the packet is a packet of the given type by looking at it's header.  <a href="#495e072c23f342f07ac500fb767919c0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b6faf7d3094187795c43a9daf887e07b"></a><!-- doxytag: member="RfidReaderMac::m_doResetSlot" ref="b6faf7d3094187795c43a9daf887e07b" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#b6faf7d3094187795c43a9daf887e07b">m_doResetSlot</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines whether m_resetSlotNumber should be considered valid. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="822c4c4665af35943241dceab975cbdd"></a><!-- doxytag: member="RfidReaderMac::m_resetSlotNumber" ref="822c4c4665af35943241dceab975cbdd" args="" -->
<a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#822c4c4665af35943241dceab975cbdd">m_resetSlotNumber</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If this slot number is reached, then the request cycle should be reset if m_doResetSlot is true. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2f4d94d0b68d60df4b98f16e10736f72"></a><!-- doxytag: member="RfidReaderMac::m_doEntireReadCycle" ref="2f4d94d0b68d60df4b98f16e10736f72" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#2f4d94d0b68d60df4b98f16e10736f72">m_doEntireReadCycle</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines whether we should do the entire read cycle or stop early after several consecutive contention cycles are unsuccessful. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="435d41600f8143e131c6a1740005170e"></a><!-- doxytag: member="RfidReaderMac::m_missedReadCount" ref="435d41600f8143e131c6a1740005170e" args="" -->
<a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#435d41600f8143e131c6a1740005170e">m_missedReadCount</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Counts the number of consecutive times that we are unable to successfully read a packet in a contention cycle. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="aacfac2d51d6edcf382b97ee91624a74"></a><!-- doxytag: member="RfidReaderMac::m_cycleTimer" ref="aacfac2d51d6edcf382b97ee91624a74" args="" -->
TimerPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#aacfac2d51d6edcf382b97ee91624a74">m_cycleTimer</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A timer to keep track of when request cycles end. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e13f892ee8fa8bcf3a752dc4013a8175"></a><!-- doxytag: member="RfidReaderMac::m_currentAppReadPacket" ref="e13f892ee8fa8bcf3a752dc4013a8175" args="" -->
PacketPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#e13f892ee8fa8bcf3a752dc4013a8175">m_currentAppReadPacket</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The application packet for which we are currently doing the MAC. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3a8a5fbaaa055253d10796a754f414e7"></a><!-- doxytag: member="RfidReaderMac::m_nextCycleNumberOfSlots" ref="3a8a5fbaaa055253d10796a754f414e7" args="" -->
<a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#3a8a5fbaaa055253d10796a754f414e7">m_nextCycleNumberOfSlots</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of slots we are currently using in contention intervals. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="29664c7702ef45185876770ef7e0e43b"></a><!-- doxytag: member="RfidReaderMac::m_nextCycleTime" ref="29664c7702ef45185876770ef7e0e43b" args="" -->
<a class="el" href="classSimTime.html">SimTime</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#29664c7702ef45185876770ef7e0e43b">m_nextCycleTime</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">How long the next cycle lasts. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="67db5fd469075b69e57e3e2377bc18cb"></a><!-- doxytag: member="RfidReaderMac::m_readerApp" ref="67db5fd469075b69e57e3e2377bc18cb" args="" -->
RfidReaderAppPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#67db5fd469075b69e57e3e2377bc18cb">m_readerApp</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A pointer to the application layer associated with this MAC. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="17154a89ce3efa370ee4838fa18f7bce"></a><!-- doxytag: member="RfidReaderMac::m_winningSlotNumbers" ref="17154a89ce3efa370ee4838fa18f7bce" args="" -->
vector&lt; pair&lt; <a class="el" href="classNodeId.html">NodeId</a>, <a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#17154a89ce3efa370ee4838fa18f7bce">m_winningSlotNumbers</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Keep track of the winning slot number for each received payload for statistics. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="da52d0aecd100a3d68b9ffb468e6bdb4"></a><!-- doxytag: member="RfidReaderMac::m_missedReads" ref="da52d0aecd100a3d68b9ffb468e6bdb4" args="" -->
vector&lt; <a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#da52d0aecd100a3d68b9ffb468e6bdb4">m_missedReads</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Keep track of the slot number for when a missed read occurs for statistics. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#c219fc833e2651d69cb03a22accbdb10">m_READER_IFS</a> = 10e-6</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The interframe spacing of reader packets.  <a href="#c219fc833e2651d69cb03a22accbdb10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e04623eeb83c8c667fda35b0acfd54ec"></a><!-- doxytag: member="RfidReaderMac::m_DEFAULT_NUMBER_OF_SLOTS" ref="e04623eeb83c8c667fda35b0acfd54ec" args="" -->
static const <a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#e04623eeb83c8c667fda35b0acfd54ec">m_DEFAULT_NUMBER_OF_SLOTS</a> = 10</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default number of slots the reader will use in contention intervals. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e71e33361009ae9fbb2b27c3146ba162"></a><!-- doxytag: member="RfidReaderMac::m_DEFAULT_CYCLE_TIME" ref="e71e33361009ae9fbb2b27c3146ba162" args="" -->
static const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#e71e33361009ae9fbb2b27c3146ba162">m_DEFAULT_CYCLE_TIME</a> = 5.25</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default time for how long a request cycle lasts. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c17e06d6635f62bc1700646d90dd9cc6"></a><!-- doxytag: member="RfidReaderMac::m_MISSED_READ_THRESHOLD" ref="c17e06d6635f62bc1700646d90dd9cc6" args="" -->
static const <a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#c17e06d6635f62bc1700646d90dd9cc6">m_MISSED_READ_THRESHOLD</a> = 3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The threshold for how many consecutive tag reads we can miss before we manually end a cycle. <br></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bc17a93839eb829c1a2cca3d918859f0"></a><!-- doxytag: member="RfidReaderMac::m_MISSED_READ_TOTAL_STRING" ref="bc17a93839eb829c1a2cca3d918859f0" args="" -->
static const string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#bc17a93839eb829c1a2cca3d918859f0">m_MISSED_READ_TOTAL_STRING</a> = &quot;missedReadTotal&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">String for the stats file output. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="da886801a95efeecf63550986f1bb617"></a><!-- doxytag: member="RfidReaderMac::m_MISSED_READ_SLOT_AVG_STRING" ref="da886801a95efeecf63550986f1bb617" args="" -->
static const string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#da886801a95efeecf63550986f1bb617">m_MISSED_READ_SLOT_AVG_STRING</a> = &quot;missedReadSlotAvg&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">String for the stats file output. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f4160dde25a71341c380ce3b732557ed"></a><!-- doxytag: member="RfidReaderMac::m_WINNING_SLOT_AVG_STRING" ref="f4160dde25a71341c380ce3b732557ed" args="" -->
static const string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#f4160dde25a71341c380ce3b732557ed">m_WINNING_SLOT_AVG_STRING</a> = &quot;winningSlotAvg&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">String for the stats file output. <br></td></tr>
<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="77482d51dcb66a5bcd15cda9ff3b32da"></a><!-- doxytag: member="RfidReaderMac::RfidMacCycleEvent" ref="77482d51dcb66a5bcd15cda9ff3b32da" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRfidReaderMac.html#77482d51dcb66a5bcd15cda9ff3b32da">RfidMacCycleEvent</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A MAC protocol for RFID readers that uses slotted ALOHA. 
<p>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8hpp-source.html#l00167">167</a> of file <a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="376bab78bbb08ad633de239e75ee206f"></a><!-- doxytag: member="RfidReaderMac::addGenericHeader" ref="376bab78bbb08ad633de239e75ee206f" args="(PacketPtr packet, NodeId receiverId) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RfidReaderMac::addGenericHeader           </td>
          <td>(</td>
          <td class="paramtype">PacketPtr&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeId.html">NodeId</a>&nbsp;</td>
          <td class="paramname"> <em>receiverId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a generic header to the packet. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet to which the header will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>receiverId</em>&nbsp;</td><td>the ID of the packet's destination. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00363">363</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="rfid__reader__mac_8hpp-source.html#l00522">RfidReaderMacData::create()</a>, <a class="el" href="classPacket.html#7a20537bda8fe7958023c4861d1d4e638eb1ea4d8728c5aaa23946b9cec32d84">Packet::DataTypes_Link</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00119">MacProtocol::getNode()</a>, and <a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad87bc5f3377e4ddad355d27711c60f018">RfidReaderMacData::Types_Generic</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00384">handleRecvdUpperLayerPacket()</a>.
</div>
</div><p>
<a class="anchor" name="feff7c6515d438329fb07fc3d501df0f"></a><!-- doxytag: member="RfidReaderMac::addSelectHeader" ref="feff7c6515d438329fb07fc3d501df0f" args="(PacketPtr packet, NodeId receiverId) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RfidReaderMac::addSelectHeader           </td>
          <td>(</td>
          <td class="paramtype">PacketPtr&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeId.html">NodeId</a>&nbsp;</td>
          <td class="paramname"> <em>receiverId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a <code>SELECT</code> header to the packet. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet to which the header will be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>receiverId</em>&nbsp;</td><td>the ID of the packet's destination. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00373">373</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="rfid__reader__mac_8hpp-source.html#l00522">RfidReaderMacData::create()</a>, <a class="el" href="classPacket.html#7a20537bda8fe7958023c4861d1d4e638eb1ea4d8728c5aaa23946b9cec32d84">Packet::DataTypes_Link</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00119">MacProtocol::getNode()</a>, and <a class="el" href="rfid__reader__mac_8hpp-source.html#l00040">RfidReaderMacData::Types_Select</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00264">handleRecvdMacPacket()</a>.
</div>
</div><p>
<a class="anchor" name="de9230a8e1cbc2a45e9561581a98452b"></a><!-- doxytag: member="RfidReaderMac::create" ref="de9230a8e1cbc2a45e9561581a98452b" args="(NodePtr node, RfidReaderAppPtr readerApp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRfidReaderMac.html#6f36ba2cda0526db8ebba0037b018b38">RfidReaderMacPtr</a> RfidReaderMac::create           </td>
          <td>(</td>
          <td class="paramtype">NodePtr&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RfidReaderAppPtr&nbsp;</td>
          <td class="paramname"> <em>readerApp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A factory method to ensure that all objects are created via <code>new</code> since we are using smart pointers. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>the node that owns this object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>readerApp</em>&nbsp;</td><td>the application using this MAC. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8hpp-source.html#l00468">468</a> of file <a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>.
<p>
References <a class="el" href="simulator_8hpp-source.html#l00513">Simulator::addSimulationEndListener()</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00434">RfidMacCycleEvent::create()</a>, <a class="el" href="timer_8hpp-source.html#l00135">Timer::create()</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00288">SlottedMacSlotEvent::create()</a>, <a class="el" href="simulator_8hpp-source.html#l00486">Simulator::instance()</a>, and <a class="el" href="rfid__reader__mac_8cpp-source.html#l00017">RfidReaderMac()</a>.
</div>
</div><p>
<a class="anchor" name="bada4f766e338f31a9c493d4fae35e7d"></a><!-- doxytag: member="RfidReaderMac::createAckPacket" ref="bada4f766e338f31a9c493d4fae35e7d" args="(NodeId destination) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PacketPtr RfidReaderMac::createAckPacket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNodeId.html">NodeId</a>&nbsp;</td>
          <td class="paramname"> <em>destination</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a acknowledgement packet for the node. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>destination</em>&nbsp;</td><td>the destination of the node to which we are sending the ACK. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to the read packet created by the function. </dd></dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00350">350</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="packet_8hpp-source.html#l00394">Packet::create()</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00522">RfidReaderMacData::create()</a>, <a class="el" href="classPacket.html#7a20537bda8fe7958023c4861d1d4e638eb1ea4d8728c5aaa23946b9cec32d84">Packet::DataTypes_Link</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00119">MacProtocol::getNode()</a>, and <a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad7758df7828fd23db2951614706a3a4f4">RfidReaderMacData::Types_Ack</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00264">handleRecvdMacPacket()</a>.
</div>
</div><p>
<a class="anchor" name="1c49eb5ba1a54f3873ea4bb81647a00e"></a><!-- doxytag: member="RfidReaderMac::createRequestPacket" ref="1c49eb5ba1a54f3873ea4bb81647a00e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PacketPtr RfidReaderMac::createRequestPacket           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a request packet for the node. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to the read packet created by the function. </dd></dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00331">331</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="node_8hpp-source.html#l00091">NodeId::broadcastDestination()</a>, <a class="el" href="packet_8hpp-source.html#l00394">Packet::create()</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00522">RfidReaderMacData::create()</a>, <a class="el" href="classPacket.html#7a20537bda8fe7958023c4861d1d4e638eb1ea4d8728c5aaa23946b9cec32d84">Packet::DataTypes_Link</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00119">MacProtocol::getNode()</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00308">m_currentAppReadPacket</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00312">m_nextCycleNumberOfSlots</a>, and <a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad90f1bae1ca01fa6042cc56f9c3cbdcd5">RfidReaderMacData::Types_Request</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00092">beginSlotEvent()</a>, and <a class="el" href="rfid__reader__mac_8cpp-source.html#l00244">startNextContentionCycle()</a>.
</div>
</div><p>
<a class="anchor" name="ee6687bd966a9c13bdddb0e5adfc3d3a"></a><!-- doxytag: member="RfidReaderMac::handleChannelBusy" ref="ee6687bd966a9c13bdddb0e5adfc3d3a" args="(PacketPtr packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RfidReaderMac::handleChannelBusy           </td>
          <td>(</td>
          <td class="paramtype">PacketPtr&nbsp;</td>
          <td class="paramname"> <em>packet</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is called when the MAC is scheduled to transmit a packet on the channel but the channel is busy. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>the packet whose transmission was being attmpted. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classRfidReaderMac.html#894d31adb55474a7d4ddf2f2a70cb035">handlePacketSent()</a> </dd></dl>

<p>
Implements <a class="el" href="classMacProtocol.html#554fdfd2535dc4f38658bbecc8966b57">MacProtocol</a>.
<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00186">186</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="rfid__reader__mac_8cpp-source.html#l00225">isPacketType()</a>, <a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad90f1bae1ca01fa6042cc56f9c3cbdcd5">RfidReaderMacData::Types_Request</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00040">RfidReaderMacData::Types_Select</a>, and <a class="el" href="mac__protocol_8cpp-source.html#l00031">MacProtocol::unblockUpperQueues()</a>.
</div>
</div><p>
<a class="anchor" name="894d31adb55474a7d4ddf2f2a70cb035"></a><!-- doxytag: member="RfidReaderMac::handlePacketSent" ref="894d31adb55474a7d4ddf2f2a70cb035" args="(PacketPtr packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RfidReaderMac::handlePacketSent           </td>
          <td>(</td>
          <td class="paramtype">PacketPtr&nbsp;</td>
          <td class="paramname"> <em>packet</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is called when the MAC is scheduled to transmit a packet on the channel and it is sent on the channel. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>the packet whose transmission was being attmpted. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classRfidReaderMac.html#ee6687bd966a9c13bdddb0e5adfc3d3a">handleChannelBusy()</a> </dd></dl>

<p>
Implements <a class="el" href="classMacProtocol.html#69bc1e2b0efec1155b67edc7a1cf700f">MacProtocol</a>.
<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00196">196</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="classPacket.html#7a20537bda8fe7958023c4861d1d4e638eb1ea4d8728c5aaa23946b9cec32d84">Packet::DataTypes_Link</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00069">isEnoughTimeForContentionCycle()</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00225">isPacketType()</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00200">SlottedMac::m_currentSlotNumber</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00287">m_doResetSlot</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00208">SlottedMac::m_numberOfSlots</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00291">m_resetSlotNumber</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00244">startNextContentionCycle()</a>, <a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad7758df7828fd23db2951614706a3a4f4">RfidReaderMacData::Types_Ack</a>, <a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad90f1bae1ca01fa6042cc56f9c3cbdcd5">RfidReaderMacData::Types_Request</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00040">RfidReaderMacData::Types_Select</a>, and <a class="el" href="mac__protocol_8cpp-source.html#l00031">MacProtocol::unblockUpperQueues()</a>.
</div>
</div><p>
<a class="anchor" name="a97095861207185bac75004923f7896c"></a><!-- doxytag: member="RfidReaderMac::handleRecvdMacPacket" ref="a97095861207185bac75004923f7896c" args="(PacketPtr packet, t_uint sendingLayerIdx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RfidReaderMac::handleRecvdMacPacket           </td>
          <td>(</td>
          <td class="paramtype">PacketPtr&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a>&nbsp;</td>
          <td class="paramname"> <em>sendingLayerIdx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle a MAC packet that is received. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the received packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sendingLayerIdx</em>&nbsp;</td><td>the index of the layer that sent the packet. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the packet was able to be handled. </dd></dl>

<p>
Implements <a class="el" href="classMacProtocol.html#0511c3a8be71439f45182cedb2ace957">MacProtocol</a>.
<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00264">264</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="rfid__reader__mac_8cpp-source.html#l00373">addSelectHeader()</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00350">createAckPacket()</a>, <a class="el" href="classPacket.html#7a20537bda8fe7958023c4861d1d4e638eb1ea4d8728c5aaa23946b9cec32d84">Packet::DataTypes_Link</a>, <a class="el" href="communication__layer_8hpp-source.html#l00056">CommunicationLayer::Directions_Upper</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00308">m_currentAppReadPacket</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00200">SlottedMac::m_currentSlotNumber</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00304">m_cycleTimer</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00211">SlottedMac::m_packetToTransmit</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00197">SlottedMac::m_slotTimer</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00203">SlottedMac::m_txSlotNumber</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00322">m_winningSlotNumbers</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00238">packetIsForMe()</a>, <a class="el" href="mac__protocol_8cpp-source.html#l00057">MacProtocol::sendToLinkLayer()</a>, <a class="el" href="classRfidTagMacData.html#a869eab50d675fd24f6265a33af5aa2f3a51201d61e310440dc3b4f23c6cfcfd">RfidTagMacData::Types_Generic</a>, and <a class="el" href="rfid__tag__mac_8hpp-source.html#l00035">RfidTagMacData::Types_Reply</a>.
</div>
</div><p>
<a class="anchor" name="d73bb89c776e85c06cf7e8cc8c92af86"></a><!-- doxytag: member="RfidReaderMac::handleRecvdUpperLayerPacket" ref="d73bb89c776e85c06cf7e8cc8c92af86" args="(PacketPtr packet, t_uint sendingLayerIdx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RfidReaderMac::handleRecvdUpperLayerPacket           </td>
          <td>(</td>
          <td class="paramtype">PacketPtr&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="utility_8hpp.html#b393a696e0318c8ab53ae2a1592e3770">t_uint</a>&nbsp;</td>
          <td class="paramname"> <em>sendingLayerIdx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle a packet received from an upper layer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the received packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sendingLayerIdx</em>&nbsp;</td><td>the index of the layer that sent the packet. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the packet was able to be handled. </dd></dl>

<p>
Implements <a class="el" href="classMacProtocol.html#071f7addca0e24a0eaa13e9093767f42">MacProtocol</a>.
<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00384">384</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="rfid__reader__mac_8cpp-source.html#l00363">addGenericHeader()</a>, <a class="el" href="mac__protocol_8cpp-source.html#l00025">MacProtocol::blockUpperQueues()</a>, <a class="el" href="node_8hpp-source.html#l00091">NodeId::broadcastDestination()</a>, <a class="el" href="packet_8hpp-source.html#l00112">Packet::DataTypes_Application</a>, <a class="el" href="log__stream__manager_8hpp-source.html#l00279">LogStreamManager::instance()</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00069">isEnoughTimeForContentionCycle()</a>, <a class="el" href="log__stream__manager_8cpp-source.html#l00085">LogStreamManager::logDebugItem()</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00308">m_currentAppReadPacket</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00200">SlottedMac::m_currentSlotNumber</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00304">m_cycleTimer</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00296">m_doEntireReadCycle</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00315">m_nextCycleTime</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00211">SlottedMac::m_packetToTransmit</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00197">SlottedMac::m_slotTimer</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00203">SlottedMac::m_txSlotNumber</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00244">startNextContentionCycle()</a>, <a class="el" href="classRfidReaderAppData.html#d808c1e2ee53819e7ba2455ea4217936c46f4decb70ae02b42387dbf2308b477">RfidReaderAppData::Types_Read</a>, and <a class="el" href="rfid__reader__app_8hpp-source.html#l00501">RfidReaderAppData::Types_Reset</a>.
</div>
</div><p>
<a class="anchor" name="3cf257bb90140675aa8b816d990b1a01"></a><!-- doxytag: member="RfidReaderMac::isEnoughTimeForContentionCycle" ref="3cf257bb90140675aa8b816d990b1a01" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RfidReaderMac::isEnoughTimeForContentionCycle           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if there is enough time left in the current request cycle to start a new contention cycle. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>true if there is enough time remaning. </dd></dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00069">69</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="log__stream__manager_8hpp-source.html#l00279">LogStreamManager::instance()</a>, <a class="el" href="log__stream__manager_8cpp-source.html#l00085">LogStreamManager::logDebugItem()</a>, <a class="el" href="rfid__reader__mac_8hpp-source.html#l00304">m_cycleTimer</a>, <a class="el" href="mac__protocol_8hpp-source.html#l00189">SlottedMac::m_DEFAULT_SLOT_TIME</a>, and <a class="el" href="rfid__reader__mac_8hpp-source.html#l00312">m_nextCycleNumberOfSlots</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00092">beginSlotEvent()</a>, <a class="el" href="rfid__reader__mac_8cpp-source.html#l00196">handlePacketSent()</a>, and <a class="el" href="rfid__reader__mac_8cpp-source.html#l00384">handleRecvdUpperLayerPacket()</a>.
</div>
</div><p>
<a class="anchor" name="495e072c23f342f07ac500fb767919c0"></a><!-- doxytag: member="RfidReaderMac::isPacketType" ref="495e072c23f342f07ac500fb767919c0" args="(PacketPtr packet, RfidReaderMacData::Types type) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RfidReaderMac::isPacketType           </td>
          <td>(</td>
          <td class="paramtype">PacketPtr&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRfidReaderMacData.html#c207973b9d7252d1ef638e90404c32ad">RfidReaderMacData::Types</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine whether the packet is a packet of the given type by looking at it's header. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet under consideration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>the type for which we are checking. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if it is a request packet. </dd></dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00225">225</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="classPacket.html#7a20537bda8fe7958023c4861d1d4e638eb1ea4d8728c5aaa23946b9cec32d84">Packet::DataTypes_Link</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00186">handleChannelBusy()</a>, and <a class="el" href="rfid__reader__mac_8cpp-source.html#l00196">handlePacketSent()</a>.
</div>
</div><p>
<a class="anchor" name="59a3015c9245de8e5d175a3f87d88fc3"></a><!-- doxytag: member="RfidReaderMac::packetIsForMe" ref="59a3015c9245de8e5d175a3f87d88fc3" args="(RfidTagMacDataPtr macData) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RfidReaderMac::packetIsForMe           </td>
          <td>(</td>
          <td class="paramtype">RfidTagMacDataPtr&nbsp;</td>
          <td class="paramname"> <em>macData</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if the packet is for me based on the receiver address (i.e., has my address or the broadcast address). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>macData</em>&nbsp;</td><td>the MAC header of the packet. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8cpp-source.html#l00238">238</a> of file <a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a>.
<p>
References <a class="el" href="node_8hpp-source.html#l00091">NodeId::broadcastDestination()</a>, and <a class="el" href="mac__protocol_8hpp-source.html#l00119">MacProtocol::getNode()</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00264">handleRecvdMacPacket()</a>.
</div>
</div><p>
<a class="anchor" name="764e0cf20bf9329d40bdf1136575f78b"></a><!-- doxytag: member="RfidReaderMac::thisMacProtocol" ref="764e0cf20bf9329d40bdf1136575f78b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMacProtocol.html#0ac9382050c88b43fb031ef3f68be3ad">MacProtocolPtr</a> RfidReaderMac::thisMacProtocol           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gives <code>this</code> pointer as a <code><a class="el" href="classMacProtocol.html">MacProtocol</a></code> object. 
<p>
This is used to deal with <code>shared_ptr's</code>, <code>this</code>, and inheritance. <dl compact><dt><b>Returns:</b></dt><dd>a pointer to <code>this</code> object. </dd></dl>

<p>
Implements <a class="el" href="classMacProtocol.html#826334dae5fc3e12ae1c446fbb11a1f6">MacProtocol</a>.
<p>
Definition at line <a class="el" href="rfid__reader__mac_8hpp-source.html#l00502">502</a> of file <a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>.
</div>
</div><p>
<a class="anchor" name="49a14ba698e23ae64e79a990dd57cbe8"></a><!-- doxytag: member="RfidReaderMac::thisRfidReaderMac" ref="49a14ba698e23ae64e79a990dd57cbe8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRfidReaderMac.html#6f36ba2cda0526db8ebba0037b018b38">RfidReaderMacPtr</a> RfidReaderMac::thisRfidReaderMac           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gives <code>this</code> pointer as a <code><a class="el" href="classRfidReaderMac.html">RfidReaderMac</a></code> object. 
<p>
This is used to deal with <code>shared_ptr's</code>, <code>this</code>, and inheritance. <dl compact><dt><b>Returns:</b></dt><dd>a pointer to <code>this</code> object. </dd></dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8hpp-source.html#l00490">490</a> of file <a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>.
</div>
</div><p>
<a class="anchor" name="da89bb83471e99ea2011e61e8b694fc3"></a><!-- doxytag: member="RfidReaderMac::thisSimulationEndListener" ref="da89bb83471e99ea2011e61e8b694fc3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMacProtocol.html#ed2eaef6e19ef3fddf18da588914e8df">SimulationEndListenerPtr</a> RfidReaderMac::thisSimulationEndListener           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gives <code>this</code> pointer as a <code>SimulationEndListenerPtr</code> object. 
<p>
This is used to deal with <code>shared_ptr's</code>, <code>this</code>, and inheritance. <dl compact><dt><b>Returns:</b></dt><dd>a pointer to <code>this</code> object. </dd></dl>

<p>
Implements <a class="el" href="classMacProtocol.html#56529b795e24f23950dc53d98ec38087">MacProtocol</a>.
<p>
Definition at line <a class="el" href="rfid__reader__mac_8hpp-source.html#l00508">508</a> of file <a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>.
</div>
</div><p>
<a class="anchor" name="833baa01bf1532b4616092c6117aa3c2"></a><!-- doxytag: member="RfidReaderMac::thisSlottedMac" ref="833baa01bf1532b4616092c6117aa3c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSlottedMac.html#2017056aae90ca668491d299866cb0e9">SlottedMacPtr</a> RfidReaderMac::thisSlottedMac           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gives <code>this</code> pointer as a <code><a class="el" href="classSlottedMac.html">SlottedMac</a></code> object. 
<p>
This is used to deal with <code>shared_ptr's</code>, <code>this</code>, and inheritance. <dl compact><dt><b>Returns:</b></dt><dd>a pointer to <code>this</code> object. </dd></dl>

<p>
Definition at line <a class="el" href="rfid__reader__mac_8hpp-source.html#l00496">496</a> of file <a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>.
</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="c219fc833e2651d69cb03a22accbdb10"></a><!-- doxytag: member="RfidReaderMac::m_READER_IFS" ref="c219fc833e2651d69cb03a22accbdb10" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double <a class="el" href="classRfidReaderMac.html#c219fc833e2651d69cb03a22accbdb10">RfidReaderMac::m_READER_IFS</a> = 10e-6<code> [static, protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The interframe spacing of reader packets. 
<p>
The time which the node defers before transmitting a packet in a slot. 
<p>
Definition at line <a class="el" href="rfid__reader__mac_8hpp-source.html#l00264">264</a> of file <a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a>.
<p>
Referenced by <a class="el" href="rfid__reader__mac_8cpp-source.html#l00092">beginSlotEvent()</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="rfid__reader__mac_8hpp-source.html">rfid_reader_mac.hpp</a><li><a class="el" href="rfid__reader__mac_8cpp-source.html">rfid_reader_mac.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Dec 12 17:04:41 2006 for rfidsim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
